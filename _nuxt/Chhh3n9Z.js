import{_ as I}from"./LSZ9u4m8.js";import{_ as N}from"./CWGpjWG0.js";import{_ as j}from"./B7Meyh5M.js";import{_ as R}from"./BB5hpHyq.js";import{d as U,f as V,g as M,h as x,i as g,j as z,k as A,t as D,o as m,l as p,w as b,a as e,b as u,e as o,m as a,n as r}from"./CFhrp1Et.js";import"./Dnyz8t2s.js";import"./CdRSbGr5.js";const F=window.setInterval,L={class:"grid grid-cols-1 lg:grid-cols-2 gap-12"},S={class:"text-[2.5rem] font-bold"},T={class:"px-4 pb-3 mt-2"},q={class:"flex flex-col gap-y-1 mt-3"},E={class:"text-lg line-through decoration-2 decoration-red-500 md:mr-12"},G={class:"text-2xl md:mr-12"},H={class:"font-bold"},J={class:"text-center font-bold"},K={class:"mt-16"},et=U({__name:"[id]",async setup(O){let i,_;const k=V(),{id:y}=k.params,{data:c}=([i,_]=M(()=>x(`/campaign/campaigns/${y}`)),i=await i,_(),i),s=g(()=>c.value),n=z();A(()=>{F(()=>{if(n.value){if(n.value.page===n.value.pages)return n.value.select(0);n.value.next()}},3e3)});const l=D(s.value.is_member),w=g(()=>l.value?"delete":"post"),v=async f=>{const{data:t}=await x(`/campaign/campaigns/${s.value.id}/join-leave/`,{method:w.value,body:{campaign:f}});l.value=!l.value,l.value?s.value.participants_count++:s.value.participants_count--};return(f,t)=>{const C=I,d=N,$=j,h=R;return m(),p(h,null,{default:b(()=>[e("div",L,[e("div",null,[u(C,{src:o(s).cover,class:"w-full h-96 rounded-xl",draggable:"false"},null,8,["src"])]),e("div",null,[e("h1",S,a(o(s).title),1),e("div",T,[u(d,{size:"sm",variant:"link",icon:"i-solar-layers-broken",label:o(s).category.name,padded:!1},null,8,["label"]),e("div",q,[t[6]||(t[6]=e("p",{class:"text-xl font-bold mb-2"},"قیمت:",-1)),e("p",E,[t[2]||(t[2]=r(" تکی:‌ ")),e("span",null,a(o(s).single_price),1),t[3]||(t[3]=r(" تومان "))]),e("p",G,[t[4]||(t[4]=r(" عمده: ")),e("span",H,a(o(s).bulk_price),1),t[5]||(t[5]=r(" تومان "))])]),u($,{value:2,max:o(s).participants_count,class:"my-7"},{label:b(()=>[e("div",J,a(o(s).participants_count)+" نفر از "+a(o(s).min_participants),1)]),_:1},8,["max"]),o(l)?(m(),p(d,{key:1,block:"",variant:"soft",color:"red",label:"منصرف شدم",class:"mt-3",onClick:t[1]||(t[1]=B=>v(o(c).id))})):(m(),p(d,{key:0,block:"",variant:"soft",label:"شرکت میکنم",class:"mt-3",onClick:t[0]||(t[0]=B=>v(o(c).id))}))])])]),e("div",K,[t[7]||(t[7]=e("p",{class:"text-2xl font-bold mb-5"},"توضیحات",-1)),e("p",null,a(o(s).description),1)])]),_:1})}}});export{et as default};
